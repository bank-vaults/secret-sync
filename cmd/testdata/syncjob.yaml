## Used to configure schedule for synchronization.
## The schedule is in Cron format, see https://en.wikipedia.org/wiki/Cron
schedule: "@daily"

## Used to only perform sync once.
## If specified, Schedule will be ignored.
runOnce: false

## Points to a file where all sync logs should be saved to.
auditLogPath: "path/to/file"

## Defines how the secrets will be synced
sync:
  ## 1. Usage: Sync key from ref (all possibilities)
  - secretRef:
      key: /source/credentials/example

  - secretRef:
      key: /source/credentials/example
    template:
      rawData: "pre-{{ .Data }}-post"

  - secretRef:
      key: /source/credentials/example
    template:
      data:
        auth: "example/pre-{{ .Data }}-post"

  - secretRef:
      key: /source/credentials/example
    target:
      key: /target/credentials/example

  - secretRef:
      key: /source/credentials/example
    target:
      key: /target/credentials/example
    template:
      rawData: "pre-{{ .Data }}-post"

  - secretRef:
      key: /source/credentials/example
    target:
      key: /target/credentials/example
    template:
      data:
        auth: "example/pre-{{ .Data }}-post"

  ## 2. Usage: Sync all keys from query individually (all possibilities)
  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)

  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)
    template:
      auth: "example/pre-{{ .Data }}-post"

  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)
    template:
      data:
        newKey: "pre-{{ .Data }}-post"

  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)
    target:
      keyPrefix: /target/credentials/new/

  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)
    target:
      keyPrefix: /target/credentials/new/
    template:
      auth: "example/pre-{{ .Data }}-post"

  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)
    target:
      keyPrefix: /target/credentials/new/
    template:
      data:
        newKey: "pre-{{ .Data }}-post"

  ## 3. Usage: Sync all keys from query into one key (all possibilities)
  - secretQuery:
      path: /source/credentials
      key:
        regexp: (username|password)
    target:
      key: /target/credentials/key-from-query
    template:
      data:
        username: '{{ .Data.username }}'
        password: '{{ .Data.password }}'

  ## 4. Usage: Sync all keys from different sources into one key (all possibilities)
  - secretSources:
    - name: example
      secretRef:
        key: /source/credentials/example

    - name: credentials
      secretQuery:
        path: /source/credentials
        key:
          regexp: (username|password)
    target:
      key: /target/credentials/key-from-sources
    template:
      data:
        example:  '{{ .Data.example }}'
        username: '{{ .Data.credentials.username }}'
        password: '{{ .Data.credentials.password }}'
